{% extends "base.html" %}
{% from 'bootstrap5/form.html' import render_form %}
{% block content %}


<div class="container" style="margin-top: 50px">
    <div class="col-12">
        <h1>{{match.home_team_info.name}} vs {{match.away_team_info.name}} - Match Info
        </h1>
        <br>
        <br>
        <h2>Pre-Match Info</h2>
        <br>
        <form action="{{ url_for('matches.match_info', league_id=league.id, match_id=match.id) }}" method="POST">
            {{ pre_match_form.csrf_token }}
            <p>
                <strong>Field:</strong> {{pre_match_form.field}}
                <br>
                <br>
                <strong>Date:</strong> {{pre_match_form.date}}
                <br>
                <br>
                <strong>Time:</strong> {{pre_match_form.time}}
            </p>
            {{ pre_match_form.submit }}
        </form>

        <br>
        <br>
        <h2>Post-Match Info</h2>
        <br>

        <form action="{{ url_for('matches.match_info', league_id=league.id, match_id=match.id) }}" method="POST">
            {{ post_match_form.csrf_token }}
            <p>
                <strong>{{match.home_team_info.name}}</strong> {{ post_match_form.home_team_score }} - {{
                post_match_form.away_team_score }} <strong>{{match.away_team_info.name}}</strong>
            </p>

            {{ post_match_form.submit }}
        </form>
        <br>
        <br>

        <form action="{{ url_for('matches.match_info', league_id=league.id, match_id=match.id) }}" method="POST">
            {{ highlights_link_form.csrf_token }}
            <p>
                <strong>Highlights Link:</strong> {{highlights_link_form.highlights_link}}
            </p>
            {{ highlights_link_form.submit }}
        </form>

    </div>

    <h1>Player Stats</h1>

    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button aria-controls="home-tab-pane" aria-selected="true" class="nav-link active" data-bs-target="#home-tab-pane"
                    data-bs-toggle="tab" id="home-team-tab" role="tab" type="button">
                {{match.home_team_info.name}}
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button aria-controls="profile-tab-pane" aria-selected="false" class="nav-link" data-bs-target="#profile-tab-pane"
                    data-bs-toggle="tab" id="away-team-tab" role="tab" type="button">
                {{match.away_team_info.name}}
            </button>
        </li>
    </ul>
    <div class="tab-content" id="myTabContent">
        <div aria-labelledby="home-tab" class="tab-pane fade show active" id="home-tab-pane" role="tabpanel"
             tabindex="0">
            <table class="table text-center">
                <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Name</th>
                    <th scope="col">MP</th>
                    <th scope="col">Goals Scored</th>
                    <th scope="col">Assists</th>
                    <th scope="col">Saves Made</th>
                    <th scope="col">Goals Against</th>
                </tr>
                </thead>
                <tbody>
                {% for player in match.home_team_info.players %}
                <tr>
                    <th scope="row">1</th>
                    <td><a href="{{url_for('users.player_profile', player_id=player.id)}}">{{player.name}}</a></td>
                    {% for stat in player.match_stats %}
                    <td>{{ stat.matches_played }}</td>
                    <td>{{ stat.goals_scored }}</td>
                    <td>{{ stat.assists }}</td>
                    <td>{{ stat.saves_made }}</td>
                    <td>{{ stat.goals_against }}</td>
                    {% endfor %}
                </tr>
                {%endfor%}
                </tbody>
            </table>
        </div>
        <div aria-labelledby="profile-tab" class="tab-pane fade" id="profile-tab-pane" role="tabpanel" tabindex="0">
            <table class="table text-center">
                <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Name</th>
                    <th scope="col">MP</th>
                    <th scope="col">Goals Scored</th>
                    <th scope="col">Assists</th>
                    <th scope="col">Saves Made</th>
                    <th scope="col">Goals Against</th>
                </tr>
                </thead>
                <tbody>
                {% for player in match.away_team_info.players %}
                <tr>
                    <th scope="row">1</th>
                    <td><a href="{{url_for('users.player_profile', player_id=player.id)}}">{{player.name}}</a></td>
                    {% for stat in player.match_stats %}
                    <td>{{ stat.matches_played }}</td>
                    <td>{{ stat.goals_scored }}</td>
                    <td>{{ stat.assists }}</td>
                    <td>{{ stat.saves_made }}</td>
                    <td>{{ stat.goals_against }}</td>
                    {% endfor %}
                </tr>
                {%endfor%}
                </tbody>
            </table>
        </div>
    </div>
</div>

{% endblock %}