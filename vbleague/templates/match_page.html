{% extends "base.html" %}
{% from 'bootstrap5/form.html' import render_form %}
{% block content %}


<div class="container" style="margin-top: 50px">
    <div class="col-12">
        <h1>{{match.home_team_info.name}} - {{match.away_team_info.name}} - Match Info
        </h1>
    </div>
    <br>
    <br>
    <h1>Player Stats</h1>

    <ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="home-team-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">
        {{match.home_team_info.name}}
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="away-team-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="false">
        {{match.away_team_info.name}}
    </button>
  </li>
</ul>
<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
      <table class="table text-center">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Name</th>
      <th scope="col">Goals Scored</th>
        <th scope="col">Assists</th>
        <th scope="col">Saves Made</th>
        <th scope="col">Goals Against</th>
        {% if current_user.is_admin %}
        <th scope="col">Stats</th>
        {% endif %}
    </tr>
  </thead>
  <tbody>
        {% for player in match.home_team_info.players %}
    <tr>
      <th scope="row">1</th>
      <td><a href="{{url_for('users.player_profile', player_id=player.id)}}">{{player.name}}</a></td>
        {% for stat in player.stats %}
        {% if stat.match_id == match.id %}
        <td>{{ stat.goals_scored }}</td>
        <td>{{ stat.assists }}</td>
        <td>{{ stat.saves_made }}</td>
        <td>{{ stat.goals_against }}</td>
        {% endif %}
        {% endfor %}
        {% if current_user.is_admin %}
        <td><a aria-disabled="true" class="btn" href="{{url_for('matches.stats_page', league_id=league.id, match_id=match.id, player_id=player.id, team_id=match.home_team)}}" role="button" style="background: #F4922A; ">
            Add Stats</a></td>
        {% endif %}
    </tr>
  {%endfor%}
  </tbody>
</table>
  </div>
  <div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
         <table class="table text-center">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Name</th>
      <th scope="col">Goals Scored</th>
        <th scope="col">Assists</th>
        <th scope="col">Saves Made</th>
        <th scope="col">Goals Against</th>
    </tr>
  </thead>
   <tbody>
        {% for player in match.away_team_info.players %}
    <tr>
      <th scope="row">1</th>
      <td><a href="{{url_for('users.player_profile', player_id=player.id)}}">{{player.name}}</a></td>
        {% for stat in player.stats %}
        {% if stat.match_id == match.id %}
        <td>{{ stat.goals_scored }}</td>
        <td>{{ stat.assists }}</td>
        <td>{{ stat.saves_made }}</td>
        <td>{{ stat.goals_against }}</td>
        {% endif %}
        {% endfor %}
        {% if current_user.is_admin %}
        <td><a aria-disabled="true" class="btn" href="{{url_for('matches.stats_page', league_id=league.id, match_id=match.id, player_id=player.id, team_id=match.away_team)}}" role="button" style="background: #F4922A; ">
            Add Stats</a></td>
        {% endif %}
    </tr>
  {%endfor%}
  </tbody>
</table>
</div>

</div>
</div>
{% endblock %}